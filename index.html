<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Living Universe Model – Retrocausal Simulation</title>
  <style>
    :root {
      --bg: #050816;
      --bg-soft: #0b1020;
      --accent: #4f46e5;
      --accent-soft: rgba(79, 70, 229, 0.1);
      --accent-2: #22c55e;
      --text: #e5e7eb;
      --muted: #9ca3af;
      --border: #1f2933;
      --danger: #f97373;
      --radius-lg: 18px;
      --radius-md: 12px;
      --shadow-soft: 0 24px 80px rgba(0, 0, 0, 0.85);
      --shadow-subtle: 0 18px 40px rgba(15, 23, 42, 0.85);
      --blur: 18px;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      min-height: 100vh;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
        "Segoe UI", sans-serif;
      color: var(--text);
      background:
        radial-gradient(circle at top left, rgba(79, 70, 229, 0.5), transparent 55%),
        radial-gradient(circle at bottom right, rgba(34, 197, 94, 0.4), transparent 55%),
        radial-gradient(circle at 20% 80%, rgba(236, 72, 153, 0.35), transparent 60%),
        var(--bg);
      display: flex;
      align-items: stretch;
      justify-content: center;
      padding: 32px 16px;
      position: relative;
      overflow: auto;
    }

    body.no-anim * {
      animation: none !important;
      transition: none !important;
    }

    body::before {
      content: "";
      position: fixed;
      inset: -50%;
      background-image:
        radial-gradient(2px 2px at 10% 20%, rgba(248, 250, 252, 0.5), transparent),
        radial-gradient(1.5px 1.5px at 80% 30%, rgba(191, 219, 254, 0.65), transparent),
        radial-gradient(1.8px 1.8px at 30% 70%, rgba(167, 243, 208, 0.55), transparent),
        radial-gradient(2px 2px at 60% 85%, rgba(248, 250, 252, 0.45), transparent);
      opacity: 0.45;
      pointer-events: none;
      animation: starfield 38s linear infinite;
    }

    .shell {
      width: 100%;
      max-width: 1120px;
      display: grid;
      grid-template-columns: minmax(0, 3fr) minmax(0, 2.5fr);
      gap: 28px;
      background: radial-gradient(circle at top left, rgba(15, 23, 42, 0.85), rgba(3, 7, 18, 0.98));
      border-radius: 26px;
      border: 1px solid rgba(148, 163, 184, 0.18);
      box-shadow: var(--shadow-soft);
      overflow: hidden;
      backdrop-filter: blur(var(--blur));
      position: relative;
    }

    .shell::before {
      content: "";
      position: absolute;
      inset: -1px;
      border-radius: inherit;
      background: conic-gradient(
        from 210deg,
        rgba(129, 140, 248, 0.08),
        transparent 25%,
        rgba(52, 211, 153, 0.06),
        transparent 55%,
        rgba(244, 114, 182, 0.08),
        transparent 80%,
        rgba(129, 140, 248, 0.08)
      );
      mix-blend-mode: screen;
      opacity: 0.7;
      pointer-events: none;
    }

    @media (max-width: 900px) {
      body {
        padding: 16px 12px 28px;
      }

      .shell {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .left,
    .right {
      padding: 26px 26px 24px;
    }

    .left {
      border-right: 1px solid rgba(148, 163, 184, 0.15);
    }

    @media (max-width: 900px) {
      .left {
        border-right: none;
        border-bottom: 1px solid rgba(148, 163, 184, 0.15);
      }
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 5px 11px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.85);
      border: 1px solid rgba(148, 163, 184, 0.35);
      color: var(--muted);
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.12em;
    }

    .badge-dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 30%, #a5b4fc, #4f46e5);
      box-shadow: 0 0 12px rgba(129, 140, 248, 0.9);
    }

    h1 {
      margin-top: 16px;
      font-size: clamp(26px, 3.1vw, 34px);
      line-height: 1.2;
      letter-spacing: -0.03em;
    }

    h1 span.gradient {
      background: linear-gradient(120deg, #a5b4fc, #4f46e5, #22c55e);
      -webkit-background-clip: text;
      color: transparent;
    }

    .subtitle {
      margin-top: 10px;
      color: var(--muted);
      font-size: 14px;
      max-width: 32rem;
      line-height: 1.5;
    }

    .summary-bar {
      margin-top: 18px;
      padding: 10px 12px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.35);
      background:
        radial-gradient(circle at 0% 0%, rgba(79, 70, 229, 0.32), transparent 65%),
        radial-gradient(circle at 100% 100%, rgba(34, 197, 94, 0.25), transparent 65%),
        rgba(15, 23, 42, 0.92);
      display: flex;
      align-items: center;
      gap: 14px;
      flex-wrap: wrap;
    }

    .summary-label {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: var(--muted);
      white-space: nowrap;
    }

    .summary-metrics {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      font-size: 11px;
      color: var(--muted);
    }

    .summary-metrics span {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 3px 7px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.95);
      border: 1px solid rgba(148, 163, 184, 0.4);
    }

    .summary-metrics strong {
      color: #e5e7eb;
      font-weight: 500;
    }

    .summary-note {
      font-size: 10px;
      color: var(--muted);
      margin-left: auto;
      opacity: 0.9;
    }

    .panel-grid {
      margin-top: 18px;
      display: grid;
      grid-template-columns: minmax(0, 1.2fr) minmax(0, 1.4fr);
      gap: 14px;
    }

    @media (max-width: 900px) {
      .panel-grid {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .panel {
      border-radius: var(--radius-lg);
      border: 1px solid rgba(148, 163, 184, 0.32);
      background: radial-gradient(circle at 0% 0%, rgba(79, 70, 229, 0.18), transparent 60%),
        radial-gradient(circle at 100% 100%, rgba(34, 197, 94, 0.18), transparent 60%),
        rgba(5, 10, 25, 0.97);
      padding: 10px 12px 11px;
      box-shadow: var(--shadow-subtle);
    }

    .panel-thin {
      margin-top: 12px;
    }

    .panel-title {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: var(--muted);
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .panel-title strong {
      color: #e5e7eb;
      font-weight: 600;
    }

    .control-row {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 6px;
      font-size: 11px;
      color: var(--muted);
      flex-wrap: wrap;
    }

    .control-row label {
      min-width: 72px;
    }

    .control-row input[type="number"],
    .control-row input[type="range"] {
      flex: 1;
      min-width: 0;
      background: rgba(15, 23, 42, 0.9);
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.5);
      color: #e5e7eb;
      padding: 3px 8px;
      font-size: 11px;
    }

    .control-row input[type="checkbox"] {
      accent-color: #4f46e5;
    }

    .control-row small {
      font-size: 10px;
      color: var(--muted);
    }

    .mini-button {
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.6);
      background: rgba(15, 23, 42, 0.96);
      color: #e5e7eb;
      font-size: 10px;
      cursor: pointer;
      transition: background 0.16s ease-out, border-color 0.16s ease-out, transform 0.1s ease-out;
    }

    .mini-button:hover {
      background: rgba(30, 64, 175, 0.9);
      border-color: rgba(129, 140, 248, 0.9);
      transform: translateY(-0.5px);
    }

    .mini-button:active {
      transform: translateY(0);
    }

    .select-input {
      flex: 1;
      min-width: 0;
      background: rgba(15, 23, 42, 0.9);
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.5);
      color: #e5e7eb;
      padding: 3px 24px 3px 8px;
      font-size: 11px;
      appearance: none;
      background-image: linear-gradient(45deg, transparent 50%, rgba(148, 163, 184, 0.8) 50%),
        linear-gradient(135deg, rgba(148, 163, 184, 0.8) 50%, transparent 50%);
      background-position: calc(100% - 12px) 8px, calc(100% - 7px) 8px;
      background-size: 5px 5px, 5px 5px;
      background-repeat: no-repeat;
    }

    .visuals-stack {
      display: grid;
      gap: 10px;
    }

    .visuals-stack canvas {
      width: 100%;
      border-radius: var(--radius-md);
      border: 1px solid rgba(15, 23, 42, 0.9);
      background: radial-gradient(circle at 0% 0%, rgba(15, 23, 42, 0.96), rgba(15, 23, 42, 1));
      display: block;
    }

    .visual-caption {
      font-size: 10px;
      color: var(--muted);
      margin-top: 2px;
    }

    .history-strip {
      margin-top: 8px;
      display: flex;
      gap: 8px;
      overflow-x: auto;
      padding-bottom: 2px;
    }

    .history-card {
      min-width: 130px;
      border-radius: 12px;
      border: 1px solid rgba(148, 163, 184, 0.35);
      background: rgba(15, 23, 42, 0.96);
      padding: 6px 7px;
      font-size: 10px;
      color: var(--muted);
      flex-shrink: 0;
    }

    .history-card strong {
      color: #e5e7eb;
      font-weight: 500;
    }

    .history-card-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 2px;
    }

    .history-chip {
      font-size: 9px;
      padding: 1px 6px;
      border-radius: 999px;
      background: rgba(30, 64, 175, 0.4);
      color: #c7d2fe;
    }

    .multiverse-metrics {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      font-size: 11px;
      color: var(--muted);
      margin-top: 4px;
    }

    .multiverse-metrics span {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 3px 7px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.4);
      background: rgba(15, 23, 42, 0.9);
    }

    .multiverse-note {
      margin-top: 4px;
      font-size: 10px;
      color: var(--muted);
    }

    .info-icon {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 14px;
      height: 14px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.8);
      font-size: 9px;
      color: #cbd5f5;
      cursor: default;
    }

    .pill-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 20px;
    }

    .pill {
      padding: 4px 10px;
      border-radius: 999px;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      border: 1px solid rgba(148, 163, 184, 0.35);
      color: var(--muted);
      background: rgba(15, 23, 42, 0.85);
    }

    .pill strong {
      color: #e5e7eb;
    }

    .grid {
      margin-top: 24px;
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 14px;
    }

    @media (max-width: 640px) {
      .grid {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .card {
      position: relative;
      border-radius: var(--radius-md);
      border: 1px solid rgba(148, 163, 184, 0.25);
      background: radial-gradient(circle at top left, rgba(15, 23, 42, 0.9), rgba(5, 10, 25, 0.98));
      padding: 14px 14px 13px;
      box-shadow: var(--shadow-subtle);
      overflow: hidden;
    }

    .card::before {
      content: "";
      position: absolute;
      inset: -30%;
      background: radial-gradient(circle at top, rgba(79, 70, 229, 0.2), transparent 55%);
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.35s ease-out;
    }

    .card:hover::before {
      opacity: 1;
    }

    .card-label {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: var(--muted);
      margin-bottom: 6px;
    }

    .metric-main {
      display: flex;
      align-items: baseline;
      gap: 8px;
      font-size: 20px;
      font-weight: 600;
    }

    .metric-main span.muted {
      font-size: 11px;
      font-weight: 400;
      color: var(--muted);
    }

    .metric-sub {
      margin-top: 2px;
      font-size: 11px;
      color: var(--muted);
    }

    .chip {
      display: inline-flex;
      align-items: center;
      gap: 5px;
      padding: 3px 7px 3px 5px;
      border-radius: 999px;
      background: rgba(22, 163, 74, 0.14);
      border: 1px solid rgba(74, 222, 128, 0.4);
      color: #bbf7d0;
      font-size: 10px;
      margin-top: 6px;
    }

    .chip.running {
      animation: chipPulse 0.9s ease-in-out infinite;
      background: rgba(59, 130, 246, 0.12);
      border-color: rgba(129, 140, 248, 0.75);
    }

    .chip-dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 30%, #bbf7d0, #22c55e);
      box-shadow: 0 0 10px rgba(74, 222, 128, 0.9);
    }

    .timeline {
      margin-top: 26px;
      border-radius: var(--radius-lg);
      border: 1px solid rgba(148, 163, 184, 0.28);
      background: linear-gradient(145deg, rgba(15, 23, 42, 0.9), rgba(8, 15, 33, 0.98));
      padding: 14px 14px 11px;
    }

    .timeline-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      margin-bottom: 10px;
    }

    .timeline-title {
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: var(--muted);
    }

    .timeline-badge {
      font-size: 11px;
      color: #a5b4fc;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .timeline-badge span {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 30%, #a5b4fc, #4f46e5);
      box-shadow: 0 0 10px rgba(129, 140, 248, 0.85);
    }

    .timeline-track {
      position: relative;
      height: 46px;
      border-radius: 999px;
      background: radial-gradient(circle at 0% 50%, rgba(79, 70, 229, 0.4), transparent 65%),
        radial-gradient(circle at 100% 50%, rgba(34, 197, 94, 0.5), transparent 65%),
        rgba(15, 23, 42, 0.98);
      overflow: hidden;
      border: 1px solid rgba(148, 163, 184, 0.45);
    }

    .timeline-gradient {
      position: absolute;
      inset: 0;
      background: linear-gradient(90deg, rgba(15, 23, 42, 0.9), transparent 18%, transparent 82%, rgba(15, 23, 42, 0.9));
      pointer-events: none;
    }

    .timeline-label-row {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 14px;
      font-size: 12px;
      font-weight: 500;
    }

    .timeline-label-row span {
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .timeline-label-row small {
      display: block;
      font-size: 10px;
      font-weight: 400;
      color: var(--muted);
    }

    .timeline-handle {
      position: absolute;
      left: 52%;
      top: 50%;
      transform: translate(-50%, -50%);
      width: 78px;
      height: 28px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 0%, rgba(248, 250, 252, 0.28), transparent 65%),
        rgba(15, 23, 42, 0.95);
      border: 1px solid rgba(148, 163, 184, 0.65);
      box-shadow:
        0 0 0 1px rgba(15, 23, 42, 0.8),
        0 10px 26px rgba(15, 23, 42, 0.95);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      gap: 6px;
      color: var(--text);
    }

    .timeline-handle-dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 30%, #a5b4fc, #4f46e5);
      box-shadow: 0 0 10px rgba(129, 140, 248, 0.9);
    }

    .timeline-note {
      margin-top: 7px;
      font-size: 11px;
      color: var(--muted);
    }

    .right-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 14px;
      margin-bottom: 16px;
    }

    .right-title {
      font-size: 13px;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      color: var(--muted);
    }

    .right-chip {
      font-size: 11px;
      color: #a5b4fc;
      background: rgba(79, 70, 229, 0.12);
      border-radius: 999px;
      padding: 4px 9px;
      border: 1px solid rgba(129, 140, 248, 0.6);
    }

    .run-button {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 6px 12px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.5);
      background: radial-gradient(circle at 0% 0%, rgba(79, 70, 229, 0.35), rgba(15, 23, 42, 0.96));
      color: #e5e7eb;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      cursor: pointer;
      transition: transform 0.12s ease-out, box-shadow 0.12s ease-out, border-color 0.12s ease-out,
        background 0.18s ease-out;
      position: relative;
      overflow: hidden;
    }

    .run-button-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 30%, #bbf7d0, #22c55e);
      box-shadow: 0 0 10px rgba(74, 222, 128, 0.9);
    }

    .run-button:hover {
      transform: translateY(-1px);
      box-shadow: 0 12px 30px rgba(15, 23, 42, 0.9);
      border-color: rgba(129, 140, 248, 0.85);
      background: radial-gradient(circle at 0% 0%, rgba(79, 70, 229, 0.6), rgba(15, 23, 42, 0.98));
    }

    .run-button:active {
      transform: translateY(0);
      box-shadow: 0 6px 14px rgba(15, 23, 42, 0.9);
    }

    .run-button-orbit {
      position: absolute;
      inset: -4px;
      border-radius: inherit;
      border: 1px dashed rgba(148, 163, 184, 0.4);
      opacity: 0;
      pointer-events: none;
      animation: orbitSpin 2.4s linear infinite;
    }

    .run-button[data-busy="true"] .run-button-orbit {
      opacity: 1;
    }

    .run-button[data-busy="true"] .run-button-dot {
      animation: chipPulse 0.9s ease-in-out infinite;
    }

    @keyframes starfield {
      0% {
        transform: translate3d(0, 0, 0) scale(1);
      }
      100% {
        transform: translate3d(-6%, -4%, 0) scale(1.05);
      }
    }

    @keyframes chipPulse {
      0% {
        box-shadow: 0 0 0 0 rgba(129, 140, 248, 0.5);
      }
      70% {
        box-shadow: 0 0 0 12px rgba(129, 140, 248, 0);
      }
      100% {
        box-shadow: 0 0 0 0 rgba(129, 140, 248, 0);
      }
    }

    @keyframes orbitSpin {
      0% {
        transform: rotate(0deg);
      }
      100% {
        transform: rotate(360deg);
      }
    }

    .explain-block {
      border-radius: var(--radius-lg);
      border: 1px solid rgba(148, 163, 184, 0.32);
      background: radial-gradient(circle at 0% 0%, rgba(79, 70, 229, 0.2), transparent 60%),
        radial-gradient(circle at 100% 100%, rgba(34, 197, 94, 0.24), transparent 60%),
        rgba(5, 10, 25, 0.96);
      padding: 14px 14px 13px;
      box-shadow: var(--shadow-subtle);
    }

    .explain-section-title {
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .explain-text {
      font-size: 12px;
      color: var(--muted);
      line-height: 1.55;
      margin-bottom: 10px;
    }

    .list {
      list-style: none;
      margin: 0;
      padding: 0;
      font-size: 12px;
      color: var(--muted);
      display: grid;
      gap: 7px;
    }

    .list li strong {
      color: #e5e7eb;
      font-weight: 500;
    }

    .badge-mini {
      display: inline-flex;
      align-items: center;
      gap: 5px;
      font-size: 11px;
      color: #bfdbfe;
      margin-top: 4px;
    }

    .badge-mini span {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 30%, #bfdbfe, #3b82f6);
      box-shadow: 0 0 10px rgba(59, 130, 246, 0.85);
    }

    .code-block {
      margin-top: 12px;
      border-radius: var(--radius-md);
      border: 1px solid rgba(15, 23, 42, 0.9);
      background: radial-gradient(circle at 0% 0%, rgba(15, 23, 42, 0.95), rgba(15, 23, 42, 1));
      font-family: ui-monospace, Menlo, Monaco, Consolas, "SF Mono", "Roboto Mono",
        monospace;
      font-size: 11px;
      color: #e5e7eb;
      overflow: hidden;
    }

    .code-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 7px 10px;
      border-bottom: 1px solid rgba(15, 23, 42, 1);
      background: linear-gradient(90deg, rgba(15, 23, 42, 0.9), rgba(15, 23, 42, 0.6));
      font-size: 10px;
      color: var(--muted);
    }

    .code-dots {
      display: inline-flex;
      gap: 5px;
    }

    .code-dots span {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: rgba(71, 85, 105, 0.9);
    }

    .code-body {
      padding: 10px 11px 10px;
      position: relative;
    }

    .code-body pre {
      margin: 0;
      white-space: pre;
    }

    .legend {
      margin-top: 9px;
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      font-size: 10px;
      color: var(--muted);
    }

    .legend span {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 3px 6px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.25);
      background: rgba(15, 23, 42, 0.9);
    }

    .legend-dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: #4f46e5;
    }

    .legend-dot.green {
      background: #22c55e;
    }

    .legend-dot.pink {
      background: #ec4899;
    }

    .footnote {
      margin-top: 12px;
      font-size: 11px;
      color: var(--muted);
      border-top: 1px dashed rgba(148, 163, 184, 0.4);
      padding-top: 8px;
    }
  </style>
</head>
<body>
  <main class="shell" id="app-root">
    <section class="left">
      <div class="badge">
        <span class="badge-dot"></span>
        Living Universe Engine
      </div>

      <h1>
        A <span class="gradient">recursive, retrocausal universe</span><br />
        simulated as a high‑dimensional state.
      </h1>

      <p class="subtitle">
        This interactive web simulation evolves a “living” universe over time,
        recursively refines its own state across many levels, and even lets the
        future gently influence the past.
      </p>

      <div class="summary-bar" id="universe-summary">
        <div class="summary-label">Current universe</div>
        <div class="summary-metrics">
          <span>
            <strong>‖U∞(t₀)‖</strong>
            <code id="summary-inf">…</code>
            <span class="info-icon" title="Norm of the infinite-depth universe at the past point t₀.">i</span>
          </span>
          <span>
            <strong>Δ‖U(t₀)‖</strong>
            <code id="summary-delta">…</code>
            <span class="info-icon" title="How much the past state U(t₀) changed after future influence from t₁.">i</span>
          </span>
          <span>
            <strong>‖Observer₁₀(t₀)‖</strong>
            <code id="summary-obs">…</code>
            <span class="info-icon" title="What an observer at recursion depth 10 measures at t₀.">i</span>
          </span>
        </div>
        <div class="summary-note" id="summary-note">
          Click “Run new universe” to generate the first sample.
        </div>
      </div>

      <div class="pill-row">
        <div class="pill"><strong>Dim</strong> = configurable state dimension</div>
        <div class="pill"><strong>Levels</strong> = adjustable recursion depth</div>
        <div class="pill"><strong>Steps</strong> = adjustable timeline length</div>
      </div>

      <div class="grid">
        <article class="card">
          <div class="card-label">Core model</div>
          <div class="metric-main">
            LivingUniverse
            <span class="muted">non‑linear evolution</span>
          </div>
          <p class="metric-sub">
            At each step, the universe state blends a sine‑transformed “now” with a
            cosine‑transformed “memory”, then recurses through deeper levels with
            gradually weaker feedback.
          </p>
          <div class="chip" id="sim-status-chip">
            <span class="chip-dot"></span>
            Running browser simulation…
          </div>
        </article>

        <article class="card">
          <div class="card-label">Infinite‑level limit</div>
          <div class="metric-main">
            U<sub>∞</sub>(t)
            <span class="muted">weighted sum of all layers</span>
          </div>
          <p class="metric-sub">
            The method <code>infinite_state(t)</code> approximates an
            “infinite‑depth” universe by summing all recursive layers,
            down‑weighting higher levels by <code>1 / (n + 1)</code>.
            In this live run, the infinite‑level norm at t = <span id="sim-t0-label">30</span>
            is <code id="sim-infinite-norm">…</code>.
          </p>
        </article>

        <article class="card">
          <div class="card-label">Retrocausality</div>
          <div class="metric-main">
            retro_influence
            <span class="muted">future → past</span>
          </div>
          <p class="metric-sub">
            A future state at time <code>t<sub>future</sub></code> gently nudges a
            past state at <code>t<sub>past</sub></code>, instead of overwriting it,
            capturing the idea of information leaking backward in time.
          </p>
          <div class="chip" style="background: rgba(248, 113, 113, 0.09); border-color: rgba(248, 113, 113, 0.6); color: #fecaca;">
            <span class="chip-dot" style="background: radial-gradient(circle at 30% 30%, #fecaca, #f97373); box-shadow: 0 0 9px rgba(248, 113, 113, 0.9);"></span>
            Δ‖U(t<sub>0</sub>)‖ after future influence: <code id="sim-delta-norm">…</code>
          </div>
        </article>

        <article class="card">
          <div class="card-label">Observer</div>
          <div class="metric-main">
            Observer(level=k)
            <span class="muted">partial reality</span>
          </div>
          <p class="metric-sub">
            An <code>Observer</code> doesn’t see the raw base history. It reads
            the universe from a specific recursion level, so different observers
            effectively inhabit different “depths” of reality. Here we show an observer at
            level <span id="level-display">10</span> measuring the norm of the universe at t = <span id="sim-t0-label-obs">30</span>:
            <code id="sim-observer-norm">…</code>.
          </p>
        </article>
      </div>

      <div class="timeline">
        <div class="timeline-header">
          <div class="timeline-title">Timeline experiment from your demo</div>
          <div class="timeline-badge">
            <span></span>
            t<sub>0</sub> = <span id="sim-t0-label-head">30</span> &nbsp;→&nbsp;
            t<sub>1</sub> = <span id="sim-t1-label-head">90</span>
          </div>
        </div>
        <div class="timeline-track">
          <div class="timeline-gradient"></div>
          <div class="timeline-label-row">
            <span>
              Past t<sub>0</sub> = <span id="sim-t0-label-track">30</span>
              <small>initial state, then modified</small>
            </span>
            <span style="justify-content: flex-end;">
              Future t<sub>1</sub> = <span id="sim-t1-label-track">90</span>
              <small>feeds information backward</small>
            </span>
          </div>
          <div class="timeline-handle">
            <span class="timeline-handle-dot"></span>
            Δhistory(t<sub>0</sub>)
          </div>
        </div>
        <p class="timeline-note" id="sim-timeline-note">
          In this simulation, the universe is evolved forward, a future state at
          time <code>t₁</code> sends a soft signal back to a past state at
          <code>t₀</code> via <code>retro_influence</code>, and the updated past is
          then compared to its infinite‑level limit.
        </p>
      </div>
    </section>

    <section class="right">
      <div class="right-header">
        <div class="right-title">Model walk‑through</div>
        <div style="display: flex; align-items: center; gap: 8px;">
          <div class="right-chip">What this simulation actually does</div>
          <button class="run-button" id="run-sim-btn" type="button">
            <span class="run-button-orbit"></span>
            <span class="run-button-dot"></span>
            Run new universe
          </button>
        </div>
      </div>

      <div class="explain-block">
        <h2 class="explain-section-title">Conceptual overview</h2>
        <p class="explain-text">
          This page defines a compact physics‑style toy universe entirely in JavaScript:
          a 10‑dimensional vector evolves over discrete time, enriched by
          recursive self‑interaction (multiple “levels” of reality),
          plus a controlled form of retrocausality where the future
          can nudge—rather than overwrite—the past.
        </p>

        <ul class="list">
          <li>
            <strong>1. LivingUniverse</strong> – stores the base timeline history and a stack
            of recursive levels at each time step, then updates them with a non‑linear
            evolution rule using sine and cosine transforms.
          </li>
          <li>
            <strong>2. Recursive levels</strong> – for each time <code>t</code> and level
            <code>n</code>, the model refines the universe using the previous level at
            <code>t</code> and <code>t-1</code>, with a feedback strength that
            weakens as <code>n</code> grows.
          </li>
          <li>
            <strong>3. Infinite‑depth approximation</strong> – all levels at a given
            time <code>t</code> are combined into a convergent sum
            <code>U<sub>∞</sub>(t) ≈ Σ U<sub>n</sub>(t)/(n+1)</code>, giving a
            smoothed “limit” universe.
          </li>
          <li>
            <strong>4. Retrocausality</strong> – the function
            <code>retro_influence</code> computes the difference between a future
            state and a past state, scales it by <code>strength</code>, and
            adds that delta into the past, encoding gentle information flow
            from future to past.
          </li>
          <li>
            <strong>5. Observer</strong> – an <code>Observer</code> attached to
            the universe simply asks, “What does the universe look like at time
            <code>t</code> if I only see level <code>k</code>?”; you demo this
            with an observer at level 10.
          </li>
          <li>
            <strong>6. Multiverse layer</strong> – conceptually, you can treat each independent
            run as one universe in a multiverse and define ensemble quantities such as
            an average universe
            <code>&lt;U(t)&gt; = (1/N) Σ<sub>i=1…N</sub> U<sup>(i)</sup>(t)</code>
            or a spread
            <code>Var[U(t)] = &lt;‖U(t)‖²&gt; − ‖&lt;U(t)&gt;‖²</code> across many samples.
          </li>
        </ul>

        <div class="badge-mini">
          <span></span>
          Think of it as: multilevel quantum‑style evolution + soft time travel.
        </div>

        <div class="code-block" aria-label="High-level pseudocode for the model">
          <div class="code-header">
            <span>Simulation &mdash; high‑level flow</span>
            <div class="code-dots">
              <span></span><span></span><span></span>
            </div>
          </div>
          <div class="code-body">
            <pre>
const U = new LivingUniverse(/* random 10‑D seed */);
U.run({ steps: 120, maxLevel: 60 });

const t0 = 30;
const t1 = 90;

// 1. Inspect state at t0
const stateBefore = U.get_state(t0);

// 2. Send a soft signal from future to past
retro_influence({
  universe: U,
  t_future: t1,
  t_past:   t0,
  strength: 0.02
});

const stateAfter    = U.get_state(t0);
const infiniteLimit = U.infinite_state(t0);

const observerLevel10  = new Observer(U, 10);
const perceivedLevel10 = observerLevel10.perceive(t0);</pre>
          </div>
        </div>

        <div class="legend">
          <span>
            <span class="legend-dot"></span>
            Base history U(t)
          </span>
          <span>
            <span class="legend-dot green"></span>
            Recursive levels U<sub>n</sub>(t)
          </span>
          <span>
            <span class="legend-dot pink"></span>
            Retrocausal delta Δ(t<sub>0</sub>)
          </span>
        </div>

        <p class="footnote" id="sim-footnote">
          This page runs the entire model in your browser using plain HTML, CSS, and JavaScript.
          The highlighted numbers above always come from a fresh live simulation whenever you run or reload it.
        </p>
      </div>

      <div class="panel-grid">
        <div class="panel">
          <div class="panel-title">
            <strong>Simulation parameters</strong>
          </div>
          <div class="control-row">
            <label for="param-steps">Steps</label>
            <input id="param-steps" type="number" min="10" max="500" value="120" />
            <small>Timeline length</small>
          </div>
          <div class="control-row">
            <label for="param-max-levels">Levels</label>
            <input id="param-max-levels" type="number" min="5" max="100" value="60" />
            <small>Recursion depth</small>
          </div>
          <div class="control-row">
            <label for="param-t0">t₀</label>
            <input id="param-t0" type="number" min="0" max="119" value="30" />
            <small>Past anchor</small>
          </div>
          <div class="control-row">
            <label for="param-t1">t₁</label>
            <input id="param-t1" type="number" min="1" max="119" value="90" />
            <small>Future anchor</small>
          </div>
          <div class="control-row">
            <label for="param-strength">Strength</label>
            <input id="param-strength" type="number" step="0.005" min="0" max="0.2" value="0.02" />
            <small>Retrocausal coupling</small>
          </div>
          <div class="control-row">
            <label for="param-dim">Dim</label>
            <input id="param-dim" type="number" min="2" max="40" value="10" />
            <small>State dimensionality</small>
          </div>
          <div class="control-row">
            <label for="model-select">Model</label>
            <select id="model-select" class="select-input">
              <option value="nonlinear">Nonlinear retrocausal map</option>
              <option value="oscillators">Coupled oscillators</option>
              <option value="ising">Simple Ising-like spins</option>
            </select>
          </div>
          <div class="control-row">
            <label for="system-select">System</label>
            <select id="system-select" class="select-input">
              <option value="isolated">Isolated</option>
              <option value="closed">Closed</option>
              <option value="open">Open</option>
            </select>
          </div>
          <div class="control-row">
            <label for="param-level">Level k</label>
            <input id="param-level" type="range" min="0" max="59" value="10" />
            <small>Observer depth</small>
          </div>
          <div class="control-row">
            <label for="param-multiverse">Multiverse</label>
            <div style="display: flex; align-items: center; gap: 6px; flex: 1;">
              <input id="param-multiverse" type="checkbox" />
              <span>Samples</span>
              <input id="param-multi-count" type="number" min="2" max="40" value="10" style="max-width: 70px;" />
            </div>
          </div>
          <div class="control-row">
            <label>Snapshot</label>
            <button class="mini-button" id="snapshot-btn" type="button">Capture this universe</button>
          </div>
          <div class="control-row">
            <label for="auto-run">Auto‑run</label>
            <div style="display: flex; align-items: center; gap: 6px;">
              <input id="auto-run" type="checkbox" />
              <span>Infinite stream</span>
              <span style="margin-left: 6px;">Alert if Δ‖U‖ ≥</span>
              <input id="alert-threshold" type="number" step="0.01" min="0" max="5" value="0.30" style="max-width: 70px;" />
            </div>
          </div>
          <div class="control-row" style="margin-top: 4px;">
            <label for="theme-select">Theme</label>
            <select id="theme-select" class="select-input">
              <option value="cosmic">Cosmic</option>
              <option value="deep">Deep space</option>
              <option value="minimal">Minimal</option>
            </select>
          </div>
          <div class="control-row">
            <label for="toggle-anim">FX</label>
            <div style="display: flex; align-items: center; gap: 6px;">
              <input id="toggle-anim" type="checkbox" checked />
              <span>Animations</span>
              <input id="toggle-sound" type="checkbox" checked />
              <span>Sound</span>
            </div>
          </div>
        </div>

        <div class="panel">
          <div class="panel-title">
            <strong>Cosmic visualisations</strong>
          </div>
          <div class="visuals-stack">
            <div>
              <canvas id="state-graph" width="400" height="110"></canvas>
              <div class="visual-caption">
                Evolution of ‖U(t)‖ across time steps for the current universe.
              </div>
            </div>
            <div>
              <canvas id="fingerprint-canvas" width="400" height="110"></canvas>
              <div class="visual-caption">
                Radial “fingerprint” of the 10‑D state at t₀ after retrocausal influence.
              </div>
            </div>
            <div>
              <div style="font-size: 11px; color: var(--muted); margin-bottom: 4px;">
                Recent universes
              </div>
              <div class="history-strip" id="history-strip"></div>
            </div>
          </div>
        </div>
      </div>

      <div class="panel panel-thin">
        <div class="panel-title">
          <strong>Multiverse ensemble</strong>
        </div>
        <div class="multiverse-metrics">
          <span>
            ⟨‖U∞(t₀)‖⟩
            <code id="multi-mean-inf">…</code>
          </span>
          <span>
            ⟨Δ‖U(t₀)‖⟩
            <code id="multi-mean-delta">…</code>
          </span>
          <span>
            Var[‖U∞(t₀)‖]
            <code id="multi-var-inf">…</code>
          </span>
        </div>
        <div class="multiverse-note" id="multi-note">
          Enable multiverse mode to estimate ensemble statistics over many random universes.
        </div>
      </div>

      <div class="time-travel-panel">
        <h3>Real‑world time travel &amp; the math</h3>
        <p>
          In our toy model, retrocausality is encoded directly by
          <code>retro_influence</code>: the past state at <code>t₀</code> is nudged
          toward the future state at <code>t₁</code>, so information can flow
          “backwards” in time inside the simulation.
        </p>
        <p style="margin-top: 6px;">
          In actual physics, time travel is modeled using
          <strong>closed timelike curves</strong> (CTCs): timelike world‑lines in a spacetime
          \((M, g)\) that loop back to their own starting event. The Einstein field equations
          admit exact solutions containing CTCs — for example, Gödel’s rotating universe and
          certain wormhole geometries — so <strong>general relativity does not forbid
          time‑travel‑like spacetimes mathematically</strong>.
        </p>
        <p style="margin-top: 6px;">
          What is <em>not</em> proven is that our universe actually realizes such metrics:
          quantum effects, energy conditions, stability, and Hawking’s chronology
          protection conjecture may all rule out physical time machines. This page is
          therefore best read as a <strong>conceptual lab</strong> for future→past influence,
          not as evidence that real‑world time travel exists.
        </p>
      </div>
    </section>
  </main>
  <script src="simulation.js"></script>
</body>
</html>


